("SendAbortedForceFlush",1,_G.IG):f("SendTimedOut",1,_G.IG);else return;if(l=r.getBatch(n),l.length!=0){s={};for(d in l.events)p=l.events[d],v=p.flights,s[v]||(s[v]={events:[],mpis:[]}),s[v].events.push(p.log);for(g in l.masterPageImpressions)w=l.masterPageImpressions[g],y=w.flights,s[y]||(s[y]={events:[],mpis:[]}),s[y].mpis.push(w.log);for(a in s)c=sj_gx(),c.open("POST",_G.XLS,e),b=sj_df(oi,c,t,n),e&&(i.flushInterval>=1e3&&(c.timeout=i.flushInterval),c.onload=b),c.setRequestHeader("Content-type","text/xml"),a!==""&&(c.setRequestHeader("X-MSEdge-ExternalExpType","JointCoord"),c.setRequestHeader("X-MSEdge-ExternalExp",a)),t.inProgressUpload=c,t.requestSentTimestamp=o.getTime(),c.send(rt(s[a].events,s[a].mpis)),e||b(null)}}}function oi(n,t,i,u){if(t.readyState===4){i.inProgressUpload=null;var f=Math.floor(t.status/100);f===2?(r.clearSentItems(u)&&!u&&a(!1),a(!0)):f===4?(r.markFailedItems(!0,u),a(!0)):r.markFailedItems(!1,u);u&&r.recordRetryAttempt()}}function yt(n,t){n===void 0&&(n=!1);t===void 0&&(t=!0);vt(!1,h.mainQueue,n,t)}function ut(n,t,i,r,u,f,e,h,c){var l={},a,v;if(k(l),t)if(typeof t=="string")l.Text=t;else for(a in t)t.hasOwnProperty(a)&&(l[a]=t[a]);return i&&(l.T="CI."+i),v=c||o.getTime(),l.TS=v,l.RTS=v-y,l.SEQ=tt++,{type:s.EVENT,impressionGuid:f!=null?f:_G.IG,previousImpressionGuid:e,timestamp:v,data:{eventType:n,eventData:l,dataSources:r,pageLayout:u},dominantImpressionGuid:h}}function pt(n){var t=sj_gx();t.open("POST",_G.XLS);t.setRequestHeader("Content-type","text/xml");t.send(rt(n,[]))}function ft(n,t,r,u,f,e,o,s,h){var c,l;if(EventsToDuplicate&&n==="Click"&&EventsToDuplicate.indexOf("duplicateClickOnLs")>=0&&(_G.GPImg=new Image,_G.GPImg.src=_G.gpUrl+"IG="+_G.IG+"&ID="+t.AppNS+","+t.K,n="XlsDelayedClick"),!_G.XLS)throw new Error("_G.XLS is necessary for clientinst_xls, but it is not defined");i.isInstrumentationEnabled&&(c=ut(n,t,r,u,f,e,o,s,h),EventsToDuplicate&&(EventsToDuplicate.indexOf("ALL")>=0||EventsToDuplicate.indexOf(n)>=0)&&(l=ut("Immediate"+n,t,r,u,f,e,o,s,h),pt([l])),p(c))}function wt(n){var t,r,u;i.isInstrumentationEnabled&&(e&&e(n),n.clientTimestamp||(n.clientTimestamp=o.getTime()),t=n.eventData,t||(t=n.eventData={}),k(t),r={type:s.MASTER_PAGE_IMPRESSION,impressionGuid:n.impressionGuid?n.impressionGuid:_G.IG,previousImpressionGuid:null,timestamp:n.clientTimestamp,data:n},EventsToDuplicate&&(EventsToDuplicate.indexOf("ALL")>=0||EventsToDuplicate.indexOf("masterPageImpression")>=0)&&(u=ut("ImmediateMaster",t,n.impressionUrl,n.dataSources,n.layoutNodes,n.impressionGuid,null,null),pt([u])),e||!i.waitForPageInfo?p(r):it.push(JSON.stringify(r)))}function et(n,t,r,u){for(var e=[],f=4;f<arguments.length;f++)e[f-4]=arguments[f];i.isInstrumentationEnabled&&(ct||(ot("Init","CI","Base"),ct=!0),ot(n,t,r,u,e))}function bt(n,t,i,r,u,f,e){var o=Object.keys(e).reduce(function(n,t){return n.concat([t,e[t]])},[]);ot(n,t,i,f,["AppNS",r,"K",u].concat(o))}function ot(n,t,i,r,u){var f={},c=_G.IG,e,h;if(u)for(e=0;e<u.length;e+=2)u[e]=="ImpressionGuid"?c=u[e+1]:f[u[e]]=u[e+1];h=o.getTime();f.T="CI."+n;f.TS=h;f.RTS=h-y;f.SEQ=tt++;f.Name=i;f[typeof t=="number"?"K":"FID"]=t;k(f);p({type:s.EVENT,impressionGuid:c,previousImpressionGuid:null,timestamp:y,data:{eventType:"ClientInst",eventData:f}})}function kt(n){n===void 0&&(n=!0);r.dumpToStorage();yt(!0,n)}function d(){r.dumpToStorage();yt(!1)}function dt(){r.dumpToStorage(!0)}function st(){r.dumpToStorage()}function gt(){v=null;_CachedFlights=undefined}var r,h;t.__esModule=!0;var ni=n("env"),ti=n("event.native"),g=n("event.custom"),o=n("shared"),s;(function(n){n[n.EVENT=0]="EVENT";n[n.MASTER_PAGE_IMPRESSION=1]="MASTER_PAGE_IMPRESSION"})(s||(s={}));var ht="MUID",v=null,nt="CIQueueError",i,ii=864e5,tt,y,u,it=[],e,l,ct;(function(n){function d(){return l&&i.isInstrumentationEnabled}function g(n){var i,t;if(n===void 0&&(n=!1),d()){i=lt(n);try{t=n?p:c;u[t]=i;u[t+"_logUploadIntervalStartDate"]=h;u[t+"_uploadedLogSizeInInterval"]=r}catch(f){if(f.name.toLowerCase().indexOf("quota")>=0)l=!1;else throw f;}}}function w(){d()&&(y&&sb_ct(y),y=sb_st(g,i.queueDumpInterval))}function rt(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"}